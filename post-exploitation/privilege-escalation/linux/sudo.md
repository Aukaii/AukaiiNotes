# Sudo

The sudo command, by default, allows you to run a program with root privileges. Under some conditions, system administrators may need to give regular users some flexibility on their privileges. For example, a junior SOC analyst may need to use Nmap regularly but would not be cleared for full root access. In this situation, the system administrator can allow this user to only run Nmap with root privileges while keeping its regular privilege level throughout the rest of the system.

Any user can check its current situation related to root privileges using the `sudo -l` command.

### What is `sudo -l`?

The command:

`sudo -l`

Shows **which commands a user can execute with sudo (elevated privileges)** without needing to know the root password. This is useful for both auditing and attempting privilege escalation during pentesting or CTFs.

***

### üß™ Practical Example

Let's assume you're logged in as a normal user named `john`.

#### Step 1: Run `sudo -l`

`john@server:~$ sudo -l`

<figure><img src="../../../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

> This means that **john can run any command as any user** , including **root** ‚Äî he has full sudo access.

***

#### ‚úÖ Escalating privileges with `sudo su`

If the user can run anything with sudo, just do:

`john@server:~$ sudo su -`

You are now **root** :

`root@server:~#`

***

### üß© Other scenarios with `sudo -l`

Sometimes, the output of `sudo -l` shows **more limited permissions** , but still useful for privilege escalation.

#### Example 2: User can only run `/bin/cat` with sudo

**Output from `sudo -l`:**

<div align="left"><figure><img src="../../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure></div>

This means he can read the file `/root/secret.txt`, which is normally only accessible by root.

**Command:**

<div align="left"><figure><img src="../../../.gitbook/assets/image (2) (1).png" alt=""><figcaption></figcaption></figure></div>

Even though he doesn't have full system access, this allows him to **read sensitive information** .

***

#### Example 3: User can run `/bin/bash` as another user

**Output from `sudo -l`:**

<div align="left"><figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption></figcaption></figure></div>

He can then open a shell as the user `developer`:

<div align="left"><figure><img src="../../../.gitbook/assets/image (4) (1).png" alt=""><figcaption></figcaption></figure></div>

Now he is the user `developer`, who might have more privileges.

***

### üõ†Ô∏è Advanced case: Dangerous binaries with sudo

If the user can run commands like `nano`, `vim`, `find`, `awk`, etc., with sudo, they might be able to gain a **root shell** through them.

#### Example: Can run `sudo nano`

<div align="left"><figure><img src="../../../.gitbook/assets/image (5) (1).png" alt=""><figcaption></figcaption></figure></div>

Inside `nano`, press `Ctrl + T` ‚Üí `Ctrl + R` ‚Üí type `/bin/sh` ‚Üí Enter\
...and voil√†! You now have a privileged shell.

***

### üìå Important tip:

Some commands can be used to get a root shell even under restrictions. For example:

![](<../../../.gitbook/assets/image (6) (1).png>)

Or:

![](<../../../.gitbook/assets/image (7) (1).png>)

{% embed url="https://gtfobins.github.io/" %}
